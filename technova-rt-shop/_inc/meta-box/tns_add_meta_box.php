<?phpadd_action('add_meta_boxes', 'tns_add_meta_box_popular');function tns_add_meta_box_popular() {	add_meta_box(		'tns_add_meta_box_popular',		'محبوب ترین محصول شما',		'tns_add_meta_box_popular_layout',		'product',		'normal',		'high'	);}function tns_add_meta_box_popular_layout($post) {	$show_popular = get_post_meta($post->ID, '_tns_check_popular', true);	wp_nonce_field('tns_nonce_popular_action', 'tns_nonce_popular_action');	?>    <div>        <label>            <input type="checkbox" name="show_popular" value="1" <?php checked($show_popular, 1); ?>>            <span>محبوب ترین محصول از دید شما آن را انتخاب کنید!</span>        </label>    </div>	<?php}add_action('save_post', 'tns_add_meta_box_popular_save_post');function tns_add_meta_box_popular_save_post($post_id) {	// Verify nonce	if (!isset($_POST['tns_nonce_popular_action']) || !wp_verify_nonce($_POST['tns_nonce_popular_action'], 'tns_nonce_popular_action')) {		return;	}	// Check autosave	if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {		return;	}	// Check permissions	if (!current_user_can('edit_post', $post_id)) {		return;	}	// Save or delete meta	if (isset($_POST['show_popular'])) {		update_post_meta($post_id, '_tns_check_popular', 1);	} else {		update_post_meta($post_id, '_tns_check_popular', 0);	}}add_action('add_meta_boxes','tns_add_meta_box_send_post_newsletter');function tns_add_meta_box_send_post_newsletter() {	add_meta_box(            'tns_send_post_newsletter'        ,'انتخاب پست در خبر نامه'        ,'tns_send_post_newsletter_layout'		,'post',		'normal',		'high'    );}function tns_send_post_newsletter_layout($post) {   $send_newsletter = get_post_meta($post->ID,'_tns_send_post_newsletter',true);   wp_nonce_field('tns_nonce_send_post_newsletter_action','tns_nonce_send_post_newsletter_action'); ?>    <div>        <label>            <input name="send_post_newsletter" type="checkbox" value="1" <?php checked($send_newsletter , 1) ?>>            <span>پستی که میخوایید در خبرنامه ارسال کنید با فعال کردن این پست ارسال میشود!</span>        </label>    </div><?php }add_action('save_post','tns_send_post_newsletter_save_post');function tns_send_post_newsletter_save_post($post_id) {	// Verify nonce	if (!isset($_POST['tns_nonce_send_post_newsletter_action']) || !wp_verify_nonce($_POST['tns_nonce_send_post_newsletter_action'], 'tns_nonce_send_post_newsletter_action')) {		return;	}	// Check autosave	if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {		return;	}	// Check permissions	if (!current_user_can('edit_post', $post_id)) {		return;	}	// Save or delete meta	if (isset($_POST['send_post_newsletter'])) {		update_post_meta($post_id, '_tns_send_post_newsletter', 1);	} else {		update_post_meta($post_id, '_tns_send_post_newsletter', 0);	}}